<?php/* * **************************************** *     _____                     *    |  __ \                    *    | |  | |_   _  ___  _ __   *    | |  | | | | |/ _ \| '_ \  *    | |__| | |_| | (_) | | | | *    |_____/ \__, |\___/|_| |_| *             __/ |             *            |___/   *            *       Paulo Felipe Possa Parrira [ paul (dot) 0 (at) live (dot) de ] *  ===================================================================== *  File: public.php *  Type: Controller *  ===================================================================== *  */require_once(config::$syspath . "includes/control/evento/events.php");require_once("lotes.php");class eventPublicController {    /**     * Constrói o objeto e inicializa a conexão com o banco de dados.     */    public function __construct() {        $this->conn = new conn();    }    public function init($url) {        $this->eventcontroller = new eventController();        $event = $this->eventcontroller->getEventByURL($url[1], true);        $this->renderEvent($event);    }    private function renderEvent($event) {        $usercontroller = new userController();        try {            $user = $usercontroller->getUser();            $user_info = $user->getBasicInfo();            if ($this->eventcontroller->userHasEditPermission($user->getId(), $event['id'])) {                $edit_flag = true;            } else {                $edit_flag = false;            }        } catch (Exception $ex) {            $edit_flag = false;        }        Twig_Autoloader::register();        $this->twig_loader = new Twig_Loader_Filesystem('includes/interface/templates/public');        $this->twig = new Twig_Environment($this->twig_loader);        echo $this->twig->render("evento/public_event.twig", Array("event" => $event, "edit_flag" => $edit_flag, "user" => $user_info, "config" => config::$html_preload, "event_interface_flag" => true));    }}/** * Método para inicializar a classe de evento, chamada pelo sistema. * @param Array $url */function init_module_public_events($url) {    $controller = new eventPublicController();    $controller->init($url);}