<?php/* * **************************************** *     _____                     *    |  __ \                    *    | |  | |_   _  ___  _ __   *    | |  | | | | |/ _ \| '_ \  *    | |__| | |_| | (_) | | | | *    |_____/ \__, |\___/|_| |_| *             __/ |             *            |___/   *            *       Paulo Felipe Possa Parrira [ paul (dot) 0 (at) live (dot) de ] *  ===================================================================== *  File: comments.php *  Type: Controller *  ===================================================================== *  */require_once(config::$syspath."includes/lib/phpmailer/PHPMailerAutoload.php");require_once(config::$syspath."includes/lib/Twig/Autoloader.php");class mail {    private $host = "smtp.republicaboemia.com";    private $port = "587";    private $username = "noreply@republicaboemia.com";    private $password = "btichanu16";    private $charset = "UTF-8";    public function sendMail($address, $subject, $body) {        $phpmailer = new PHPMailer();        $phpmailer->CharSet = $this->charset;        $phpmailer->IsSMTP();        $phpmailer->SMTPOptions = array(            'ssl' => array(                'verify_peer' => false,                'verify_peer_name' => false,                'allow_self_signed' => true            )        );        $phpmailer->SMTPAuth = true;        $phpmailer->Host = $this->host;        $phpmailer->Port = $this->port;        $phpmailer->Username = $this->username;        $phpmailer->Password = $this->password;        $phpmailer->setFrom($this->username, "CarnaBoemia");        $phpmailer->Subject = $subject;        $phpmailer->MsgHTML($this->htmlHeader($body));        $phpmailer->AddAddress($address, "");        if (!$phpmailer->Send()) {            throw new Exception("Impossível enviar email. " . $phpmailer->ErrorInfo);        }    }    private function htmlHeader($body) {        $html = "<header>";        $html.= "<strong>CarnaBoemia 2016 - Sistema de Gerenciamento de Pacotes [ Dyon ]</strong><br/>";        $html.= "A mensagem que você está recebendo foi enviada automaticamente, para entrar em contato conosco utilize o email: republicaboemia@hotmail.com<br/>";        $html.= "===============================================================<br/><br/>";        $html.= "</header>";        $html.= $body;        $html.= "<br/>";        $html.= "<br/><br/><footer>";        $html.= "===============================================================<br/>";        $html.= "Dyon - CarnaBoemia 2016 - <a href='http://republicaboemia.com/cliente'>http://republicaboemia.com/cliente</a>";        $html.= "<br/><img src='http://republicaboemia.com.br/images/brasao_boemia.png' alt='RepúblicaBoemia' />";        return $html;    }    public static function sendTemplateEmail($template_file, $template_vars, $address, $subject) {        Twig_Autoloader::register();        $twig_loader = new Twig_Loader_Filesystem('includes/interface/templates');        $twig = new Twig_Environment($twig_loader);        $body = $twig->render("mail/$template_file.twig", Array("vars" => $template_vars, "config" => config::$html_preload));        $mail = new mail();        $mail->sendMail($address, $subject, $body);    }}