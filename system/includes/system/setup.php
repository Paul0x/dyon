<?php/****************************************** *     _____                     *    |  __ \                   *    | |  | |_   _  ___  _ __   *    | |  | | | | |/ _ \| '_ \  *    | |__| | |_| | (_) | | | | *    |_____/ \__, |\___/|_| |_| *             __/ |             *            |___/   *            *       Paulo Felipe Possa Parrira [ paul (dot) 0 (at) live (dot) de ] *  ===================================================================== */include("includes/lib/util.php");include("includes/system/config.php");class Setup{    private $ajax;    private $url;        public function init()    {                $this->url = explode("/",filter_input(INPUT_GET,'pt_cod'));                  /* Check for AJAX requests         * PS: Check for HTTP_X_REQUESTED_WITH may not work for non-jquery requests. */        if($_POST['majax'] == true && (isset($_SERVER['HTTP_X_REQUESTED_WITH']) && strtolower($_SERVER['HTTP_X_REQUESTED_WITH']) == 'xmlhttprequest')) {            $this->url["ajax"] = true;        }        /* Defining GET parameters and loading the modules */         if(!in_array($this->url[0],config::$modules["list"]))        {            $this->url[0] = "index";        }                $this->loadModules();           }            private function loadModules()    {        /* Carrega os mÃ³dulos */        require_once(config::$modules[$this->url[0]]["system_path"]);        if(isset(config::$modules[$this->url[0]]["javascript"])) {            if(is_array(config::$modules[$this->url[0]]["javascript"])) {                foreach(config::$modules[$this->url[0]]["javascript"] as $scripts => $script) {                    config::$html_preload["javascript"][] = $script;                }            }            else {                config::$html_preload["javascript"][] = config::$modules[$this->url[0]]["javascript"];            }        }        if(isset(config::$modules[$this->url[0]]["css"])) {            if(is_array(config::$modules[$this->url[0]]["css"])) {                foreach(config::$modules[$this->url[0]]["css"] as $styles => $style) {                    config::$html_preload["css"][] = $style;                }            }            else {                config::$html_preload["css"][] = config::$modules[$this->url[0]]["css"];            }        }        call_user_func(config::$modules[$this->url[0]]["init_func"],$this->url);    }    }